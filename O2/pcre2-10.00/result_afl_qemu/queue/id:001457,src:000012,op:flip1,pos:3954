# This set of tests is for UTF support, including Unicode properties. The 
# Unicode tests are all compatible with all versions of Perl >= 5.10, but
# some of the property tests may differ because of different versions of
# Unicode in use by PCRE2 and Perl.

#perltest

/a.b/utf
    acb
    a\x7fb
    a\x{100}b
    ***     a\x{4000}xyb
    a\x{4000}\x7fyb
    a\x{4000}\x{100}yb
    *** Failers
    a\x{4000}b
    ac\ncb

/a(.*?)(.)/
    a\xc0\x88b

/a(.*?)(.)/utf
    a\x{100}b
 ab\x{111}cd
   abzcd
   ab|cd
   Q?
   *** Failers

/[\x{100}\x{200}]{1,3}/utf
   ab\x{100}cd
   ab\x{200}cd
   ab\x{200}\x{100}\x{200}\x{100}cd
   *** Failers

/[\x{100}\x{200}]{1,3}?/utf
   ab\x{100}cd
   ab\x{200}cd
   ab\x{200}\x{100}\x{200}\x{100}cd
   *** Failers

/[Q\x{100}\x{200}]{1,3}/utf
   ab\x{100}cd
   ab\x{200}cd
   ab\x{200}\x{100}\x{200}\x{100}cd
   *** Failers

/[Q\x{100}\x{200}]{1,3}?/utf
   ab\x{100}cd
   ab\x{200}cd
   ab\x{200}\x{100}\x{200}\x{100}cd
   *** Failers

/(?<=[\x{100}\x{200}])X/utf
    abc\x{200}X
    abc\x{100}X
    *** Failers
    X

/(?<=[Q\x{100}\x{200}])X/utf
    abc\x{200}X
    abc\x{100}X
    abQX
    *** Failers
    X

/(?<=[\x{100}\x{200}]{3})X/utf
    abc\x{100}\x{200}\x{100}X
    *** Failers
    abc\x{200}X
    X

/[^\x{100}\x{200}]X/utf
    AX
    \x{150}X
    \x{500}X
    *** Failers
    \x{100}X
    \x{200}X

/[^Q\x{100}\x{200}]X/utf
    AX
    \x{150}X
    \x{500}X
    *** Failers
    \x{100}X
    \x{200}X
    QX

/[^\x{100}-\x{200}]X/utf
    AX
    \x{500}X
    *** Failers
    \x{100}X
    \x{150}X
    \x{200}X

/[z-\x{100}]/i,utf
    z
    Z
    \x{100}
    *** Failers
    \x{102}
    y

/[\xFF]/
    >\xff<

/[\xff]/utf
    >\x{ff}<

/[^\xFF]/
    XYZ

/[^\xff]/utf
    XYZ
    \x{123}

/^[ac]*b/utf
  xb

/^[ac\x{100}]*b/utf
  xb

/^[^x]*b/i,utf
  xb

/^[^x]*b/utf
  xb

/^\d*b/utf
  xb

/(|a)/g,utf
    catac
    a\x{256}a

/^\x{85}$/i,utf
    \x{85}

/^áˆ´/utf
    áˆ´

/^\áˆ´/utf
    áˆ´

"(?s)(.{1,5})"utf
    abcdefg
    ab

/a*\x{100}*\w/utf
    a

/\S\S/g,utf
    A\x{a3}BC

/\S{2}/g,utf
    A\x{a3}BC

/\W\W/g,utf
    +\x{a3}==

/\W{2}/g,utf
    +\x{a3}==

/\S/g,utf
    \x{442}\x{435}\x{441}\x{442}

/[\S]/g,utf
    \x{442}\x{435}\x{441}\x{442}

/\D/g,utf
    \x{442}\x{435}\x{441}\x{442}

/[\D]/g,utf
    \x{442}\x{435}\x{441}\x{442}

/\W/g,utf
    \x{2442}\x{2435}\x{2441}\x{2442}

/[\W]/g,utf
    \x{2442}\x{2435}\x{2441}\x{2442}

/[\S\s]*/utf
    abc\n\r\x{442}\x{435}\x{441}\x{442}xyz

/[\x{41f}\S]/g,utf
    \x{442}\x{435}\x{441}\x{442}

/.[^\S]./g,utf
    abc def\x{442}\x{443}xyz\npqr

/.[^\S\n]./g,utf
    abc def\x{442}\x{443}xyz\npqr

/[[:^alnum:]]/g,utf
    +\x{2442}

/[[:^alpha:]]/g,utf
    +\x{2442}

/[[:^ascii:]]/g,utf
    A\x{442}

/[[:^blank:]]/g,utf
    A\x{442}

/[[:^cntrl:]]/g,utf
    A\x{442}

/[[:^digit:]]/g,utf
    A\x{442}

/[[:^graph:]]/g,utf
    \x19\x{e01ff}

/[[:^lower:]]/g,utf
    A\x{422}

/[[:^print:]]/g,utf
    \x{19}\x{e01ff}

/[[:^punct:]]/g,utf
    A\x{442}

/[[:^space:]]/g,utf
    A\x{442}

/[[:^upper:]]/g,utf
    a\x{442}

/[[:^word:]]/g,utf
    +\x{2442}

/[[:^xdigit:]]/g,utf
    M\x{442}

/[^ABCDEFGHIJKLMNOPQRSTUVWXYZÃ€ÃÃ‚ÃƒÃ„Ã…Ã†Ã‡ÃˆÃ‰ÃŠÃ‹ÃŒÃÃŽÃÃÃ‘Ã’Ã“Ã”Ã•Ã–Ã˜Ã™ÃšÃ›ÃœÃÃžÄ€Ä‚Ä„Ä†ÄˆÄŠÄŒÄŽÄÄ’Ä”Ä–Ä˜ÄšÄœÄžÄ Ä¢Ä¤Ä¦Ä¨ÄªÄ¬Ä®Ä°Ä²Ä´Ä¶Ä¹Ä»Ä½Ä¿ÅÅƒÅ…Å‡ÅŠÅŒÅŽÅÅ’Å”Å–Å˜ÅšÅœÅžÅ Å¢Å¤Å¦Å¨ÅªÅ¬Å®Å°Å²Å´Å¶Å¸Å¹Å»Å½ÆÆ‚Æ„Æ†Æ‡Æ‰ÆŠÆ‹ÆŽÆÆÆ‘Æ“Æ”Æ–Æ—Æ˜ÆœÆÆŸÆ Æ¢Æ¤Æ¦Æ§Æ©Æ¬Æ®Æ¯Æ±Æ²Æ³ÆµÆ·Æ¸Æ¼Ç„Ç‡ÇŠÇÇÇ‘Ç“Ç•Ç—Ç™Ç›ÇžÇ Ç¢Ç¤Ç¦Ç¨ÇªÇ¬Ç®Ç±Ç´Ç¶Ç·Ç¸ÇºÇ¼Ç¾È€È‚È„È†ÈˆÈŠÈŒÈŽÈÈ’È”È–È˜ÈšÈœÈžÈ È¢È¤È¦È¨ÈªÈ¬È®È°È²ÈºÈ»È½È¾ÉÎ†ÎˆÎ‰ÎŠÎŒÎŽÎÎ‘Î’Î“Î”Î•Î–Î—Î˜Î™ÎšÎ›ÎœÎÎžÎŸÎ Î¡Î£Î¤Î¥Î¦Î§Î¨Î©ÎªÎ«Ï’Ï“Ï”Ï˜ÏšÏœÏžÏ Ï¢Ï¤Ï¦Ï¨ÏªÏ¬Ï®Ï´Ï·Ï¹ÏºÏ½Ï¾Ï¿Ð€ÐÐ‚ÐƒÐ„Ð…Ð†Ð‡ÐˆÐ‰ÐŠÐ‹ÐŒÐÐŽÐÐÐ‘Ð’Ð“Ð”Ð•Ð–Ð—Ð˜Ð™ÐšÐ›ÐœÐÐžÐŸÐ Ð¡Ð¢Ð£Ð¤Ð¥Ð¦Ð§Ð¨Ð©ÐªÐ«Ð¬Ð­Ð®Ð¯Ñ Ñ¢Ñ¤Ñ¦Ñ¨ÑªÑ¬Ñ®Ñ°Ñ²Ñ´Ñ¶Ñ¸ÑºÑ¼Ñ¾Ò€ÒŠÒŒÒŽÒÒ’Ò”Ò–Ò˜ÒšÒœÒžÒ Ò¢Ò¤Ò¦Ò¨ÒªÒ¬Ò®Ò°Ò²Ò´Ò¶Ò¸ÒºÒ¼Ò¾Ó€ÓÓƒÓ…Ó‡Ó‰Ó‹ÓÓÓ’Ó”Ó–Ó˜ÓšÓœÓžÓ Ó¢Ó¤Ó¦Ó¨ÓªÓ¬Ó®Ó°Ó²Ó´Ó¶Ó¸Ô€Ô‚Ô„Ô†ÔˆÔŠÔŒÔŽÔ±Ô²Ô³Ô´ÔµÔ¶Ô·Ô¸Ô¹ÔºÔ»Ô¼Ô½Ô¾Ô¿Õ€ÕÕ‚ÕƒÕ„Õ…Õ†Õ‡ÕˆÕ‰ÕŠÕ‹ÕŒÕÕŽÕÕÕ‘Õ’Õ“Õ”Õ•Õ–á‚ á‚¡á‚¢à‚£á‚¤á‚¥á‚¦á‚§á‚¨á‚©á‚ªá‚«á‚¬á‚­á‚®á‚¯á‚°á‚±á‚²á‚³á‚´á‚µá‚¶á‚·á‚¸á‚¹á‚ºá‚»á‚¼á‚½á‚¾á‚¿áƒ€áƒáƒ‚áƒƒáƒ„áƒ…á¸€á¸‚á¸„á¸†á¸ˆá¸Šá¸Œá¸Žá¸á¸’á¸”á¸–á¸˜á¸šá¸œá¸žá¸ á¸¢á¸¤á¸¦á¸¨á¸ªá¸¬á¸®á¸°á¸²á¸´á¸¶á¸¸á¸ºá¸¼á¸¾á¹€á¹‚á¹„á¹†á¹ˆá¹Šá¹Œá¹Žá¹á¹’á¹”á¹–á¹˜á¹šá¹œá¹žá¹ á¹¢á¹¤á¹¦á¹¨á¹ªá¹¬á¹®á¹°á¹²á¹´á¹¶á¹¸á¹ºá¹¼á¹¾áº€áº‚áº„áº†áºˆáºŠáºŒáºŽáºáº’áº”áº áº¢áº¤áº¦áº¨áºªáº¬áº®áº°áº²áº´áº¶áº¸áººáº¼áº¾á»€á»‚á»„á»†á»ˆá»Šá»Œá»Žá»á»’á»”á»–á»˜á»šá»œá»žá» á»¢á»¤á»¦á»¨á»ªá»¬á»®á»°á»²á»´á»¶á»¸á¼ˆá¼‰á¼Šá¼‹á¼Œá¼á¼Žá¼á¼˜á¼™á¼šá¼›á¼œá¼á¼¨á¼©á¼ªá¼«á¼¬á¼­á¼®á¼¯á¼¸á¼¹á¼ºá¼»á¼¼á¼½á¼¾á¼¿á½ˆá½‰á½Šá½‹á½Œá½á½™á½›á½á½Ÿá½¨á½©á½ªá½«á½¬á½­á½®á½¯á¾¸á¾¹á¾ºá¾»á¿ˆá¿‰á¿Šá¿‹á¿˜á¿™á¿šá¿›á¿¨á¿©á¿ªá¿«á¿¬á¿¸á¿¹á¿ºá¿»abcdefghijklmnopqrstuvwxyzÂªÂµÂºÃŸÃ Ã¡Ã¢Ã£Ã¤Ã¥Ã¦Ã§Ã¨Ã©ÃªÃ«Ã¬Ã­Ã®Ã¯Ã°Ã±Ã²Ã³Ã´ÃµÃ¶Ã¸Ã¹ÃºÃ»Ã¼Ã½Ã¾Ã¿ÄÄƒÄ…Ä‡Ä‰Ä‹ÄÄÄ‘Ä“Ä•Ä—Ä™Ä›ÄÄŸÄ¡Ä£Ä¥Ä§Ä©Ä«Ä­Ä¯Ä±Ä³ÄµÄ·Ä¸ÄºÄ¼Ä¾Å€Å‚Å„Å†ÅˆÅ‰Å‹ÅÅÅ‘Å“Å•Å—Å™Å›ÅÅŸÅ¡Å£Å¥Å§Å©Å«Å­Å¯Å±Å³ÅµÅ·ÅºÅ¼Å¾Å¿Æ€ÆƒÆ…ÆˆÆŒÆÆ’Æ•Æ™ÆšÆ›ÆžÆ¡Æ£Æ¥Æ¨ÆªÆ«Æ­Æ°Æ´Æ¶Æ¹ÆºÆ½Æ¾Æ¿Ç†Ç‰ÇŒÇŽÇÇ’Ç”Ç–Ç˜ÇšÇœÇÇŸÇ¡Ç£Ç¥Ç§Ç©Ç«Ç­Ç¯Ç°Ç³ÇµÇ¹Ç»Ç½Ç¿ÈÈƒÈ…È‡È‰È‹ÈÈÈ‘È“È•È—È™È›ÈÈŸÈ¡È£È¥È§È©È«È­È¯È±È³È´ÈµÈ¶È·È¸È¹È¼È¿É€ÉÉ‘É’É“É”É•É–É—É˜É™ÉšÉ›ÉœÉÉžÉŸÉ É¡É¢É£É¤É¥É¦É§É¨É©ÉªÉ«É¬É­É®É¯É°É±É²É³É´ÉµÉ¶É·É¸É¹ÉºÉ»É¼É½É¾É¿Ê€ÊÊ‚ÊƒÊ„Ê…Ê†Ê‡ÊˆÊ‰ÊŠÊ‹ÊŒÊÊŽÊÊÊ‘Ê’Ê“Ê”Ê•Ê–Ê—Ê˜Ê™ÊšÊ›ÊœÊÊžÊŸÊ Ê¡Ê¢Ê£Ê¤Ê¥Ê¦Ê§Ê¨Ê©ÊªÊ«Ê¬Ê­Ê®Ê¯ÎÎ¬Î­Î®Î¯Î°Î±Î²Î³Î´ÎµÎ¶Î·Î¸Î¹ÎºÎ»Î¼Î½Î¾Î¿Ï€ÏÏ‚ÏƒÏ„Ï…Ï†Ï‡ÏˆÏ‰ÏŠÏ‹ÏŒÏÏŽÏÏ‘Ï•Ï–Ï—Ï™Ï›ÏÏŸÏ¡Ï£Ï¥Ï§Ï©Ï«Ï­Ï¯Ï°Ï±Ï²Ï³ÏµÏ¸Ï»Ï¼Ð°Ð±Ð²Ð³Ð´ÐµÐ¶Ð·Ð¸Ð¹ÐºÐ»Ð¼Ð½Ð¾Ð¿Ñ€ÑÑ‚ÑƒÑ„Ñ…Ñ†Ñ‡ÑˆÑ‰ÑŠÑ‹ÑŒÑÑŽÑÑÑ‘Ñ’Ñ“Ñ”Ñ•Ñ–Ñ—Ñ˜Ñ™ÑšÑ›ÑœÑÑžÑŸÑ¡Ñ£Ñ¥Ñ§Ñ©Ñ«Ñ­Ñ¯Ñ±Ñ³ÑµÑ·Ñ¹Ñ»Ñ½Ñ¿ÒÒ‹ÒÒÒ‘Ò“Ò•Ò—Ò™Ò›ÒÒŸÒ¡Ò£Ò¥Ò§Ò©Ò«Ò­Ò¯Ò±Ò³ÒµÒ·Ò¹Ò»Ò½Ò¿Ó‚Ó„Ó†ÓˆÓŠÓŒÓŽÓ‘Ó“Ó•Ó—Ó™Ó›ÓÓŸÓ¡Ó£Ó¥Ó§Ó©Ó«Ó­Ó¯Ó±Ó³ÓµÓ·Ó¹ÔÔƒÔ…Ô‡Ô‰Ô‹ÔÔÕ¡Õ¢Õ£Õ¤Õ¥Õ¦Õ§Õ¨Õ©ÕªÕ«Õ¬Õ­Õ®Õ¯Õ°Õ±Õ²Õ³Õ´ÕµÕ¶Õ·Õ¸Õ¹ÕºÕ»Õ¼Õ½Õ¾Õ¿Ö€ÖÖ‚ÖƒÖ„Ö…Ö†Ö‡á´€á´á´‚á´ƒá´„á´…á´†á´‡á´ˆá´‰á´Šá´‹á´Œá´á´Žá´á´á´‘á´’á´“á´”á´•á´–á´—á´˜á´™á´šá´›á´œá´á´žá´Ÿá´ á´¡á´¢á´£á´¤á´¥á´¦á´§á´¨á´©á´ªá´«áµ¢áµ£áµ¤áµ¥áµ¦áµ§áµ¨áµ©áµªáµ«áµ¬áµ­áµ®áµ¯áµ°áµ±áµ²áµ³áµ´áµµáµ¶áµ·áµ¹áµºáµ»áµ¼áµ½áµ¾áµ¿á¶€á¶á¶‚á¶ƒá¶„á¶…á¶†á¶‡á¶ˆá¶‰á¶Šá¶‹á¶Œá¶á¶Žá¶á¶á¶‘á¶’á¶“á¶”á¶•á¶–á¶—á¶˜á¶™á¶šá¸á¸ƒá¸…á¸‡á¸‰á¸‹á¸á¸á¸‘á¸“á¸•á¸—á¸™á¸›á¸á¸Ÿá¸¡á¸£á¸¥á¸§á¸©á¸«á¸­á¸¯á¸±á¸³á¸µá¸·á¸¹á¸»á¸½á¸¿á¹á¹ƒá¹…á¹‡á¹‰á¹‹á¹á¹á¹‘á¹“á¹•á¹—á¹™á¹›á¹á¹Ÿá¹¡á¹£á¹¥á¹§á¹©á¹«á¹­á¹¯á¹±á¹³á¹µá¹·á¹¹á¹»á¹½á¹¿áºáºƒáº…áº‡áº‰áº‹áºáºáº‘áº“áº•áº–áº—áº˜áº™áºšáº›áº¡áº£áº¥áº§áº©áº«áº­áº¯áº±áº³áºµáº·áº¹áº»áº½áº¿á»á»ƒá»…á»‡á»‰á»‹á»á»á»‘á»“á»•á»—á»™á»›á»á»Ÿá»¡á»£á»¥á»§á»©á»«á»­á»¯á»±á»³á»µá»·á»¹á¼€á¼á¼‚á¼ƒá¼„á¼…á¼†á¼‡á¼á¼‘á¼’á¼“á¼”á¼•á¼ á¼¡á¼¢á¼£á¼¤á¼¥á¼¦á¼§á¼°á¼±á¼²á¼³á¼´á¼µá¼¶á¼·á½€á½á½‚á½ƒá½„á½…á½á½‘á½’á½“á½”á½•á½–á½—á½ á½¡á½¢á½£á½¤á½¥á½¦á½§á½°á½±á½²á½³á½´á½µá½¶á½·á½¸á½¹á½ºá½»á½¼á½½á¾€á¾á¾‚á¾ƒá¾„á¾…á¾†á¾‡á¾á¾‘á¾’á¾“á¾”á¾•á¾–á¾—á¾ á¾¡á¾¢á¾£á¾¤á¾¥á¾¦á¾§á¾°á¾±á¾²á¾³á¾´á¾¶á¾·á¾¾á¿‚á¿ƒá¿„á¿†á¿‡á¿á¿‘á¿’á¿“á¿–á¿—á¿ á¿¡á¿¢á¿£á¿¤á¿¥á¿¦á¿§á¿²á¿³á¿´á¿¶á¿·â²â²ƒâ²…â²‡â²‰â²‹â²â²â²‘â²“â²•â²—â²™â²›â²â²Ÿâ²¡â²£â²¥â²§â²©â²«â²­â²¯â²±â²³â²µâ²·â²¹â²»â²½â²¿â³â³ƒâ³…â³‡â³‰â³‹â³â³â³‘â³“â³•â³—â³™â³›â³â³Ÿâ³¡â³£â³¤â´€â´â´‚â´ƒâ´„â´…â´†â´‡â´ˆâ´‰â´Šâ´‹â´Œâ´â´Žâ´â´â´‘â´’â´“â´”â´•â´–â´—â´˜â´™â´šâ´›â´œâ´â´žâ´Ÿâ´ â´¡â´¢â´£â´¤â´¥ï¬€ï¬ï¬‚ï¬ƒï¬„ï¬…ï¬†ï¬“ï¬”ï¬•ï¬–ï¬—\d-_^]/utf

/^[^d]*?$/
    abc

/^[^d]*?$/utf
    abc

/^[^d]*?$/i
    abc

/^[^d]*?$/i,utf
    abc

/(?i)[\xc3\xa9\xc3\xbd]|[\xc3\xa9\xc3\xbdA]/utf

/^[a\x{c0}]b/utf
    \x{c0}b

/^([a\x{c0}]*?)aa/utf
    a\x{c0}aaaa/

/^([a\x{c0}]*?)aa/utf
    a\x{c0}aaaa/
    a\x{c0}a\x{c0}aaa/

/^([a\x{c0}]*)aa/utf
    a\x{c0}aaaa/
    a\x{c0}a\x{c0}aaa/

/^([a\x{c0}]*)a\x{c0}/utf
    a\x{c0}aaaa/
    a\x{c0}a\x{c0}aaa/

/A*/g,utf
    AAB\x{123}BAA

/(abc)\1/i,utf
   abc

/(abc)\1/utf
   abc

/a(*:a\x{1234}b)/utf,mark
    abc

/a(*:aÂ£b)/utf,mark
    abc

# Noncharacters

/./utf
    \x{fffe}
    \x{ffff}
    \x{1fffe}
    \x{1ffff}
    \x{2fffe}
    \x{2ffff}
    \x{3fffe}
    \x{3ffff}
    \x{4fffe}
    \x{4ffff}
    \x{5fffe}
    \x{5ffff}
    \x{6fffe}
    \x{6ffff}
    \x{7fffe}
    \x{7ffff}
    \x{8fffe}
    \x{8ffff}
    \x{9fffe}
    \x{9ffff}
    \x{afffe}
    \x{affff}
    \x{bfffe}
    \x{bffff}
    \x{cfffe}
    \x{cffff}
    \x{dfffe}
    \x{dffff}
    \x{efffe}
    \x{effff}
    \x{ffffe}
    \x{fffff}
    \x{10fffe}
    \x{10ffff}
    \x{fdd0}
    \x{fdd1}
    \x{fdd2}
    \x{fdd3}
    \x{fdd4}
    \x{fdd5}
    \x{fdd6}
    \x{fdd7}
    \x{fdd8}
    \x{fdd9}
    \x{fdda}
    \x{fddb}
    \x{fddc}
    \x{fddd}
    \x{fdde}
    \x{fddf}
    \x{fde0}
    \x{fde1}
    \x{fde2}
    \x{fde3}
    \x{fde4}
    \x{fde5}
    \x{fde6}
    \x{fde7}
    \x{fde8}
    \x{fde9}
    \x{fdea}
    \x{fdeb}
    \x{fdec}
    \x{fded}
    \x{fdee}
    \x{fdef}

/^\d*\w{4}/utf
    1234
    123

/^[^b]*\w{4}/utf
    aaaa
    aaa

/^[^b]*\w{4}/i,utf
    aaaa
    aaa

/^\x{100}*.{4}/utf
    \x{100}\x{100}\x{100}\x{100}
    \x{100}\x{100}\x{100}

/^\x{100}*.{4}/i,utf
    \x{100}\x{100}\x{100}\x{100}
    \x{100}\x{100}\x{100}

/^a+[a\x{200}]/utf
    aa

/^.\B.\B./utf
    \x{10123}\x{10124}\x{10125}

/^#[^\x{ffff}]#[^\x{ffff}]#[^\x{ffff}]#/utf
    #\x{10000}#\x{100}#\x{10ffff}#
    
# Unicode property support tests 

/^\pC\pL\pM\pN\pP\pS\pZ</utf
    \x7f\x{c0}\x{30f}\x{660}\x{66c}\x{f01}\x{1680}<
    \np\x{300}9!\$ < 
    ** Failers 
    ap\x{300}9!\$ < 
  
/^\PC/utf
    X
    ** Failers 
    \x7f
  
/^\PL/utf
    9
    ** Failers 
    \x{c0}
  
/^\PM/utf
    X
    ** Failers 
    \x{30f}
  
/^\PN/utf
    X
    ** Failers 
    \x{660}
  
/^\PP/utf
    X
    ** Failers 
    \x{66c}
  
/^\PS/utf
    X
    ** Failers 
    \x{f01}
  
/^\PZ/utf
    X
    ** Failers 
    \x{1680}
    
/^\p{Cc}/utf
    \x{017}
    \x{09f} 
    ** Failers
    \x{0600} 
  
/^\p{Cf}/utf
    \x{601}
    ** Failers
    \x{09f} 
  
/^\p{Cn}/utf
    \x{e0000}
    ** Failers
    \x{09f} 
  
/^\p{Co}/utf
    \x{f8ff}
    ** Failers
    \x{09f} 
  
/^\p{Ll}/utf
    a
    ** Failers 
    Z
    \x{e000}  
  
/^\p{Lm}/utf
    \x{2b0}
    ** Failers
    a 
  
/^\p{Lo}/utf
    \x{1bb}
    \x{3400}
    \x{3401}
    \x{4d00}
    \x{4db4}
    \x{4db5}     
    ** Failers
    a 
    \x{2b0}
    \x{4db6} 
  
/^\p{Lt}/utf
    \x{1c5}
    ** Failers
    a 
    \x{2b0}
  
/^\p{Lu}/utf
    A
    ** Failers
    \x{2b0}
  
/^\p{Mc}/utf
    \x{903}
    ** Failers
    X
    \x{300}
       
/^\p{Me}/utf
    \x{488}
    ** Failers
    X
    \x{903}
    \x{300}
  
/^\p{Mn}/utf
    \x{300}
    ** Failers
    X
    \x{903}
  
/^\p{Nd}+/utf
    0123456789\x{660}\x{661}\x{662}\x{663}\x{664}\x{665}\x{666}\x{667}\x{668}\x{669}\x{66a}
    \x{6f0}\x{6f1}\x{6f2}\x{6f3}\x{6f4}\x{6f5}\x{6f6}\x{6f7}\x{6f8}\x{6f9}\x{6fa}
    \x{966}\x{967}\x{968}\x{969}\x{96a}\x{96b}\x{96c}\x{96d}\x{96e}\x{96f}\x{970}
    ** Failers
    X
  
/^\p{Nl}/utf
    \x{16ee}
    ** Failers
    X
    \x{966}
  
/^\p{No}/utf
    \x{b2}
    \x{b3}
    ** Failers
    X
    \x{16ee}
  
/^\p{Pc}/utf
    \x5f
    \x{203f}
    ** Failers
    X
    -
    \x{58a}
  
/^\p{Pd}/utf
    -
    \x{58a}
    ** Failers
    X
    \x{203f}
  
/^\p{Pe}/utf
    )
    ]
    }
    \x{f3b}
    ** Failers
    X
    \x{203f}
    (
    [
    {
    \x{f3c}
  
/^\p{Pf}/utf
    \x{bb}
    \x{2019}
    ** Failers
    X
    \x{203f}
  
/^\p{Pi}/utf
    \x{ab}
    \x{2018}
    ** Failers
    X
    \x{203f}
  
/^\p{Po}/utf
    !
    \x{37e}
    ** Failers
    X
    \x{203f}
  
/^\p{Ps}/utf
    (
    [
    {
    \x{f3c}
    ** Failers
    X
    )
    ]
    }
    \x{f3b}
  
/^\p{Sk}/utf
    \x{2c2}
    ** Failers
    X
    \x{9f2}
  
/^\p{Sm}+/utf
    +<|~\x{ac}\x{2044}
    ** Failers
    X
    \x{9f2}
  
/^\p{So}/utf
    \x{a6}
    \x{482} 
    ** Failers
    X
    \x{9f2}
  
/^\p{Zl}/utf
    \x{2028}
    ** Failers
    X
    \x{2029}
  
/^\p{Zp}/utf
    \x{2029}
    ** Failers
    X
    \x{2028}
  
/\p{Nd}+(..)/utf
      \x{660}\x{661}\x{662}ABC
  
/\p{Nd}+?(..)/utf
      \x{660}\x{661}\x{662}ABC
  
/\p{Nd}{2,}(..)/utf
      \x{660}\x{661}\x{662}ABC
  
/\p{Nd}{2,}?(..)/utf
      \x{660}\x{661}\x{662}ABC
  
/\p{Nd}*(..)/utf
      \x{660}\x{661}\x{662}ABC
  
/\p{Nd}*?(..)/utf
      \x{660}\x{661}\x{662}ABC
  
/\p{Nd}{2}(..)/utf
      \x{660}\x{661}\x{662}ABC
  
/\p{Nd}{2,3}(..)/utf
      \x{660}\x{661}\x{662}ABC
  
/\p{Nd}{2,3}?(..)/utf
      \x{660}\x{661}\x{662}ABC
  
/\p{Nd}?(..)/utf
      \x{660}\x{661}\x{662}ABC
  
/\p{Nd}??(..)/utf
      \x{660}\x{661}\x{662}ABC
  
/\p{Nd}*+(..)/utf
      \x{660}\x{661}\x{662}ABC
  
/\p{Nd}*+(...)/utf
      \x{660}\x{661}\x{662}ABC
  
/\p{Nd}*+(....)/utf
      ** Failers
      \x{660}\x{661}\x{662}ABC
  
/(?<=A\p{Nd})XYZ/utf
    A2XYZ
    123A5XYZPQR
    ABA\x{660}XYZpqr
    ** Failers
    AXYZ
    XYZ     
    
/(?<!\pL)XYZ/utf
    1XYZ
    AB=XYZ.. 
    XYZ 
    ** Failers
    WXYZ 

/[\P{Nd}]+/utf
    abcd
    ** Failers
    1234

/\D+/utf
    11111111111111111111111111111111111111111111111111111111111111111111111
    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
     
/\P{Nd}+/utf
    11111111111111111111111111111111111111111111111111111111111111111111111
    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

/[\D]+/utf
    11111111111111111111111111111111111111111111111111111111111111111111111
    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

/[\P{Nd}]+/utf
    11111111111111111111111111111111111111111111111111111111111111111111111
    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

/[\D\P{Nd}]+/utf
    11111111111111111111111111111111111111111111111111111111111111111111111
    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

/\pL/utf
    a
    A 

/\pL/i,utf
    a
    A 
    
/\p{Lu}/utf
    A
    aZ
    ** Failers
    abc   

/\p{Ll}/utf
    a
    Az
    ** Failers
    ABC   

/A\x{391}\x{10427}\x{ff3a}\x{1fb0}/utf
    A\x{391}\x{10427}\x{ff3a}\x{1fb0}
    ** Failers
    a\x{391}\x{10427}\x{ff3a}\x{1fb0}   
    A\x{3b1}\x{10427}\x{ff3a}\x{1fb0}
    A\x{391}\x{1044F}\x{ff3a}\x{1fb0}
    A\x{391}\x{10427}\x{ff5a}\x{1fb0}
    A\x{391}\x{10427}\x{ff3a}\x{1fb8}

/A\x{391}\x{10427}\x{ff3a}\x{1fb0}/i,utf
    A\x{391}\x{10427}\x{ff3a}\x{1fb0}
    a\x{391}\x{10427}\x{ff3a}\x{1fb0}   
    A\x{3b1}\x{10427}\x{ff3a}\x{1fb0}
    A\x{391}\x{1044F}\x{ff3a}\x{1fb0}
    A\x{391}\x{10427}\x{f}]/i,utf
    \x{391}
    \x{ff3a}
    \x{3b1}
    \x{ff5a}   
    
/^(\X*)C/utf
    A\x{300}\x{301}\x{302}BCA\x{300}\x{301} 
    A\x{300}\x{301}\x{302}BCA\x{300}\x{301}C 

/^(\X*?)C/utf
    A\x{300}\x{301}\x{302}BCA\x{300}\x{301} 
    A\x{300}\x{301}\x{302}BCA\x{300}\x{301}C 

/^(\X*)(.)/utf
    A\x{300}\x{301}\x{302}BCA\x{300}\x{301} 
    A\x{300}\x{301}\x{302}BCA\x{300}\x{301}C 

/^(\X*?)(.)/utf
    A\x{300}\x{301}\x{302}BCA\x{300}\x{301} 
    A\x{300}\x{301}\x{302}BCA\x{300}\x{301}C 

/^\X(.)/utf
    ***ad89}\x{11fe}L, LVT, T
    \x{1111}\x{ad89}\x{11fe}\x{11fe}L, LVT, T, T
    \x{ad89}\x{11fe}\x{11fe}LVT, T, T
    *These match just the first codepoint (invalid sequence)
    \x{1111}\x{11fe}L, T
    \x{ae4c}\x{1111}LV, L
    \x{ae4c}\x{ae4c}LV, LV
    \x{ae4c}\x{ad89}LV, LVT
    \x{1169}\x{1111}V, L
    \x{1169}\x{ae4c}V, LV
    \x{1169}\x{ad89}V, LVT
    \x{ad89}\x{1111}LVT, L
    \x{ad89}\x{1169}LVT, V
    \x{ad89}\x{ae4c}LVT, LV
    \x{ad89}\x{ad89}LVT, LVT
    \x{11fe}\x{1111}T, L
    \x{11fe}\x{1169}T, V
    \x{11fe}\x{ae4c}T, LV
    \x{11fe}\x{ad89}T, LVT
    *Test extend and spacing mark
    \x{1111}\x{ae4c}\x{0711}L, LV, extend
    \x{1111}\x{ae4c}\x{1b04}L, LV, spacing mark
    \x{1111}\x{ae4c}\x{1b04}\x{0711}\x{1b04}L, LV, spacing mark, extend, spacing mark
    *Test CR, LF, and control
    \x0d\x{0711}CR, extend
    \x0d\x{1b04}CR, spacingmark
    \x0a\x{0711}LF, extend
    \x0a\x{1b04}LF, spacingmark
    \x0b\x{0711}Control, extend
    \x09\x{1b04}Control, spacingmark
    *There are no Prepend characters, so we can't test Prepend, CR
    
/^(?>\X{2})X/utf,aftertext
    \x{1111}\x{ae4c}\x{1111}\x{ae4c}X
    
/^\X{2,4}X/utf,aftertext
    \x{1111}\x{ae4c}\x{1111}\x{ae4c}X
    \x{1111}\x{ae4c}\x{1111}\x{ae4c}\x{1111}\x{ae4c}X
    \x{1111}\x{ae4c}\x{1111}\x{ae4c}\x{1111}\x{ae4c}\x{1111}\x{ae4c}X

/^\X{2,4}?X/utf,aftertext
    \x{1111}\x{ae4c}\x{1111}\x{ae4c}X
    \x{1111}\x{ae4c}\x{1111}\x{ae4c}\x{1111}\x{ae4c}X
    \x{1111}\x{ae4c}\x{1111}\x{ae4c}\x{1111}\x{ae4c}\x{1111}\x{ae4c}X

/\X*Z/utf,no_start_optimize
  A\x{300}

/\X*(.)/utf,no_start_optimize
  A\x{1111}\x{ae4c}\x{1169}

# --------------------------------------------

/\x{1e9e}+/i,utf
    \x{1e9e}\x{00df}

/[z\x{1e9e}]+/i,utf
    \x{1e9e}\x{00df}

/\x{00df}+/i,utf
    \x{1e9e}\x{00df}

/[z\x{00df}]+/i,utf
    \x{1e9e}\x{00df}

/\x{1f88}+/i,utf
    \x{1f88}\x{1f80} 

/[z\x{1f88}]+/i,utf
    \x{1f88}\x{1f80} 
    
# Characters with more than one other case; test in classes 

/[z\x{00b5}]+/i,utf
    \x{00b5}\x{039c}\x{03bc}

/[z\x{039c}]+/i,utf
    \x{00b5}\x{039c}\x{03bc}

/[z\x{03bc}]+/i,utf
    \x{00b5}\x{039c}\x{03bc}

/[z\x{00c5}]+/i,utf
    \x{00c5}\x{00e5}\x{212b}

/[z\x{00e5}]+/i,utf
    \x{00c5}\x{00e5}\x{212b}

/[z\x{212b}]+/i,utf
    \x{00c5}\x{00e5}\x{212b}

/[z\x{01c4}]+/i,utf
    \x{01c4}\x{01c5}\x{01c6}

/[z\x{01c5}]+/i,utf
    \x{01c4}\x{01c5}\x{01c6}

/[z\x{01c6}]+/i,utf
    \x{01c4}\x{01c5}\x{01c6}

/[z\x{01c7}]+/i,utf
    \x{01c7}\x{01c8}\x{01c9}

/[z\x{01c8}]+/i,utf
    \x{01c7}\x{01c8}\x{01c9}

/[z\x{01c9}]+/i,utf
    \x{01c7}\x{01c8}\x{01c9}

/[z\x{01ca}]+/i,utf
    \x{01ca}\x{01cb}\x{01cc}

/[z\x{01cb}]+/i,utf
    \x{01ca}\x{01cb}\x{01cc}

/[z\x{01cc}]+/i,utf
    \x{01ca}\x{01cb}\x{01cc}

/[z\x{01f1}]+/i,utf
    \x{01f1}\x{01f2}\x{01f3}

/[z\x{01f2}]+/i,utf
    \x{01f1}\x{01f2}\x{01f3}

/[z\x{01f3}]+/i,utf
    \x{01f1}\x{01f2}\x{01f3}

/[z\x{0345}]+/i,utf
    \x{0345}\x{0399}\x{03b9}\x{1fbe}

/[z\x{0399}]+/i,utf
    \x{0345}\x{0399}\x{03b9}\x{1fbe}

/[z\x{03b9}]+/i,utf
    \x{0345}\x{0399}\x{03b9}\x{1fbe}

/[z\x{1fbe}]+/i,utf
    \x{0345}\x{0399}\x{03b9}\x{1fbe}

/[z\x{0392}]+/i,utf
    \x{0392}\x{03b2}\x{03d0}

/[z\x{03b2}]+/i,utf
    \x{0392}\x{03b2}\x{03d0}

/[z\x{03d0}]+/i,utf
    \x{0392}\x{03b2}\x{03d0}

/[z\x{0395}]+/i,utf
    \x{0395}\x{03b5}\x{03f5}

/[z\x{03b5}]+/i,utf
    \x{0395}\x{03b5}\x{03f5}

/[z\x{03f5}]+/i,utf
    \x{0395}\x{03b5}\x{03f5}

/[z\x{0398}]+/i,utf
    \x{0398}\x{03b8}\x{03d1}\x{03f4}

/[z\x{03b8}]+/i,utf
    \x{0398}\x{03b8}\x{03d1}\x{03f4}

/[z\x{03d1}]+/i,utf
    \x{0398}\x{03b8}\x{03d1}\x{03f4}

/[z\x{03f4}]+/i,utf
    \x{0398}\x{03b8}\x{03d1}\x{03f4}

/[z\x{039a}]+/i,utf
    \x{039a}\x{03ba}\x{03f0}

/[z\x{03ba}]+/i,utf
    \x{039a}\x{03ba}\x{03f0}

/[z\x{03f0}]+/i,utf
    \x{039a}\x{03ba}\x{03f0}

/[z\x{03a0}]+/i,utf
    \x{03a0}\x{03c0}\x{03d6} 

/[z\x{03c0}]+/i,utf
    \x{03a0}\x{03c0}\x{03d6} 

/[z\x{03d6}]+/i,utf
    \x{03a0}\x{03c0}\x{03d6} 

/[z\x{03a1}]+/i,utf
    \x{03a1}\x{03c1}\x{03f1}

/[z\x{03c1}]+/i,utf
    \x{03a1}\x{03c1}\x{03f1}

/[z\x{03f1}]+/i,utf
    \x{03a1}\x{03c1}\x{03f1}

/[z\x{03a3}]+/i,utf
    \x{03A3}\x{03C2}\x{03C3}

/[z\x{03c2}]+/i,utf
    \x{03A3}\x{03C2}\x{03C3}

/[z\x{03c3}]+/i,utf
    \x{03A3}\x{03C2}\x{03C3}

/[z\x{03a6}]+/i,utf
    \x{03a6}\x{03c6}\x{03d5} 

/[z\x{03c6}]+/i,utf
    \x{03a6}\x{03c6}\x{03d5} 

/[z\x{03d5}]+/i,utf
    \x{03a6}\x{03c6}\x{03d5} 

/[z\x{03c9}]+/i,utf
    \x{03c9}\x{03a9}\x{2126}

/[z\x{03a9}]+/i,utf
    \x{03c9}\x{03a9}\x{2126}

/[z\x{2126}]+/i,utf
    \x{03c9}\x{03a9}\x{2126}

/[z\x{1e60}]+/i,utf
    \x{1e60}\x{1e61}\x{1e9b}

/[z\x{1e61}]+/i,utf
    \x{1e60}\x{1e61}\x{1e9b}

/[z\x{1e9b}]+/i,utf
    \x{1e60}\x{1e61}\x{1e9b}

# Perl 5.12.4 gets these wrong, but 5.15.3 is OK 

/[z\x{004b}]+/i,utf
    \x{004b}\x{006b}\x{212a}

/[z\x{006b}]+/i,utf
    \x{004b}\x{006b}\x{212a}

/[z\x{212a}]+/i,utf
    \x{004b}\x{006b}\x{212a}

/[z\x{0053}]+/i,utf
    \x{0053}\x{0073}\x{017f}

/[z\x{0073}]+/i,utf
    \x{0053}\x{0073}\x{017f}

/[z\x{017f}]+/i,utf
    \x{0053}\x{0073}\x{017f}
    
# --------------------------------------  

/(Î£Î†ÎœÎŸÎ£) \1/i,utf
    Î£Î†ÎœÎŸÎ£ Î£Î†ÎœÎŸÎ£
    Î£Î†ÎœÎŸÎ£ ÏƒÎ¬Î¼Î¿Ï‚
    ÏƒÎ¬Î¼Î¿Ï‚ ÏƒÎ¬Î¼Î¿Ï‚
    ÏƒÎ¬Î¼Î¿Ï‚ ÏƒÎ¬Î¼Î¿Ïƒ
    ÏƒÎ¬Î¼Î¿Ï‚ Î£Î†ÎœÎŸÎ£  

/(ÏƒÎ¬Î¼Î¿Ï‚) \1/i,utf
    Î£Î†ÎœÎŸÎ£ Î£Î†ÎœÎŸÎ£
    Î£Î†ÎœÎŸÎ£ ÏƒÎ¬Î¼Î¿Ï‚
    ÏƒÎ¬Î¼Î¿Ï‚ ÏƒÎ¬Î¼Î¿Ï‚
    ÏƒÎ¬Î¼Î¿Ï‚ ÏƒÎ¬Î¼Î¿Ïƒ
    ÏƒÎ¬Î¼Î¿Ï‚ Î£Î†ÎœÎŸÎ£  

/(Î£Î†ÎœÎŸÎ£) \1*/i,utf
    Î£Î†ÎœÎŸÎ£\x20
    Î£Î†ÎœÎŸÎ£ Î£Î†ÎœÎŸÎ£ÏƒÎ¬Î¼Î¿Ï‚ÏƒÎ¬Î¼Î¿Ï‚

# Perl matches these 

/\x{00b5}+/i,utf
    \x{00b5}\x{039c}\x{03bc}

/\x{039c}+/i,utf
    \x{00b5}\x{039c}\x{03bc}

/\x{03bc}+/i,utf
    \x{00b5}\x{039c}\x{03bc}


/\x{00c5}+/i,utf
    \x{00c5}\x{00e5}\x{212b}

/\x{00e5}+/i,utf
    \x{00c5}\x{00e5}\x{212b}

/\x{212b}+/i,utf
    \x{00c5}\x{00e5}\x{212b}


/\x{01c4}+/i,utf
    \x{01c4}\x{01c5}\x{01c6}

/\x{01c5}+/i,utf
    \x{01c4}\x{01c5}\x{01c6}

/\x{01c6}+/i,utf
    \x{01c4}\x{01c5}\x{01c6}


/\x{01c7}+/i,utf
    \x{01c7}\x{01c8}\x{01c9}

/\x{01c8}+/i,utf
    \x{01c7}\x{01c8}\x{01c9}

/\x{01c9}+/i,utf
    \x{01c7}\x{01c8}\x{01c9}


/\x{01ca}+/i,utf
    \x{01ca}\x{01cb}\x{01cc}

/\x{01cb}+/i,utf
    \x{01ca}\x{01cb}\x{01cc}

/\x{01cc}+/i,utf
    \x{01ca}\x{01cb}\x{01cc}


/\x{01f1}+/i,utf
    \x{01f1}\x{01f2}\x{01f3}

/\x{01f2}+/i,utf
    \x{01f1}\x{01f2}\x{01f3}

/\x{01f3}+/i,utf
    \x{01f1}\x{01f2}\x{01f3}


/\x{0345}+/i,utf
    \x{0345}\x{0399}\x{03b9}\x{1fbe}

/\x{0399}+/i,utf
    \x{0345}\x{0399}\x{03b9}\x{1fbe}

/\x{03b9}+/i,utf
    \x{0345}\x{0399}\x{03b9}\x{1fbe}

/\x{1fbe}+/i,utf
    \x{0345}\x{0399}\x{03b9}\x{1fbe}


/\x{0392}+/i,utf
    \x{0392}\x{03b2}\x{03d0}

/\x{03b2}+/i,utf
    \x{0392}\x{03b2}\x{03d0}

/\x{03d0}+/i,utf
    \x{0392}\x{03b2}\x{03d0}
    

/\x{0395}+/i,utf
    \x{0395}\x{03b5}\x{03f5}

/\x{03b5}+/i,utf
    \x{0395}\x{03b5}\x{03f5}

/\x{03f5}+/i,utf
    \x{0395}\x{03b5}\x{03f5}


/\x{0398}+/i,utf
    \x{0398}\x{03b8}\x{03d1}\x{03f4}

/\x{03b8}+/i,utf
    \x{0398}\x{03b8}\x{03d1}\x{03f4}

/\x{03d1}+/i,utf
    \x{0398}\x{03b8}\x{03d1}\x{03f4}

/\x{03f4}+/i,utf
    \x{0398}\x{03b8}\x{03d1}\x{03f4}
    

/\x{039a}+/i,utf
    \x{039a}\x{03ba}\x{03f0}

/\x{03ba}+/i,utf
    \x{039a}\x{03ba}\x{03f0}

/\x{03f0}+/i,utf
    \x{039a}\x{03ba}\x{03f0}
    

/\x{03a0}+/i,utf
    \x{03a0}\x{03c0}\x{03d6} 

/\x{03c0}+/i,utf
    \x{03a0}\x{03c0}\x{03d6} 

/\x{03d6}+/i,utf
    \x{03a0}\x{03c0}\x{03d6} 


/\x{03a1}+/i,utf
    \x{03a1}\x{03c1}\x{03f1}

/\x{03c1}+/i,utf
    \x{03a1}\x{03c1}\x{03f1}

/\x{03f1}+/i,utf
    \x{03a1}\x{03c1}\x{03f1}


/\x{03a3}+/i,utf
    \x{03A3}\x{03C2}\x{03C3}

/\x{03c2}+/i,utf
    \x{03A3}\x{03C2}\x{03C3}

/\x{03c3}+/i,utf
    \x{03A3}\x{03C2}\x{03C3}
    

/\x{03a6}+/i,utf
    \x{03a6}\x{03c6}\x{03d5} 

/\x{03c6}+/i,utf
    \x{03a6}\x{03c6}\x{03d5} 

/\x{03d5}+/i,utf
    \x{03a6}\x{03c6}\x{03d5} 


/\x{03c9}+/i,utf
    \x{03c9}\x{03a9}\x{2126}

/\x{03a9}+/i,utf
    \x{03c9}\x{03a9}\x{2126}

/\x{2126}+/i,utf
    \x{03c9}\x{03a9}\x{2126}
    

/\x{1e60}+/i,utf
    \x{1e60}\x{1e61}\x{1e9b}

/\x{1e61}+/i,utf
    \x{1e60}\x{1e61}\x{1e9b}

/\x{1e9b}+/i,utf
    \x{1e60}\x{1e61}\x{1e9b}
    

/\x{1e9e}+/i,utf
    \x{1e9e}\x{00df}

/\x{00df}+/i,utf
    \x{1e9e}\x{00df}
    

/\x{1f88}+/i,utf
    \x{1f88}\x{1f80} 

/\x{1f80}+/i,utf
    \x{1f88}\x{1f80} 

# Perl 5.12.4 gets these wrong, but 5.15.3 is OK 

/\x{004b}+/i,utf
    \x{004b}\x{006b}\x{212a}

/\x{006b}+/i,utf
    \x{004b}\x{006b}\x{212a}

/\x{212a}+/i,utf
    \x{004b}\x{006b}\x{212a}


/\x{0053}+/i,utf
    \x{0053}\x{0073}\x{017f}

/\x{0073}+/i,utf
    \x{0053}\x{0073}\x{017f}

/\x{017f}+/i,utf
    \x{0053}\x{0073}\x{017f}

/^\p{Any}*\d{4}/utf
    1234
    123 

/^\X*\w{4}/utf
    1234
    123  

/^A\s+Z/utf,ucp
    A\x{2005}Z
    A\x{85}\x{2005}Z

/^A[\s]+Z/utf,ucp
    A\x{2005}Z
    A\x{85}\x{2005}Z

/^[[:graph:]]+$/utf,ucp
    Letter:ABC
    Mark:\x{300}\x{1d172}\x{1d17b}
    Number:9\x{660}
    Punctuation:\x{66a},;
    Symbol:\x{6de}<>\x{fffc}
    Cf-property:\x{ad}\x{600}\x{601}\x{602}\x{603}\x{604}\x{6dd}\x{70f}
    \x{200b}\x{200c}\x{200d}\x{200e}\x{200f}
    \x{202a}\x{202b}\x{202c}\x{202d}\x{202e}
    \x{2060}\x{2061}\x{2062}\x{2063}\x{2064}
    \x{206a}\x{206b}\x{206c}\x{206d}\x{206e}\x{206f}
    \x{feff}
    \x{fff9}\x{fffa}\x{fffb}
    \x{110bd}
    \x{1d173}\x{1d174}\x{1d175}\x{1d176}\x{1d177}\x{1d178}\x{1d179}\x{1d17a}
    \x{e0001}
    \x{e0020}\x{e0030}\x{e0040}\x{e0050}\x{e0060}\x{e0070}\x{e007f}
    ** Failers
    \x{09}
    \x{0a}
    \x{1D}
    \x{20}
    \x{85}
    \x{a0}
    \x{1680}
    \x{2028}
    \x{2029}
    \x{202f}
    \x{2065}
    \x{3000}
    \x{e0002}
    \x{e001f}
    \x{e0080} 

/^[[:print:]]+$/utf,ucp
    Space: \x{a0}
    \x{1680}\x{2000}\x{2001}\x{2002}\x{2003}\x{2004}\x{2005}
    \x{2006}\x{2007}\x{2008}\x{2009}\x{200a} 
    \x{202f}\x{205f} 
    \x{3000}
    Letter:ABC
    Mark:\x{300}\x{1d172}\x{1d17b}
    Number:9\x{660}
    Punctuation:\x{66a},;
    Symbol:\x{6de}<>\x{fffc}
    Cf-property:\x{ad}\x{600}\x{601}\x{602}\x{603}\x{604}\x{6dd}\x{70f}
    \x{200b}\x{200c}\x{200d}\x{200e}\x{200f}
    \x{202a}\x{202b}\x{202c}\x{202d}\x{202e}
    \x{202f}
    \x{2060}\x{2061}\x{2062}\x{2063}\x{2064}
    \x{206a}\x{206b}\x{206c}\x{206d}\x{206e}\x{206f}
    \x{feff}
    \x{fff9}\x{fffa}\x{fffb}
    \x{110bd}
    \x{1d173}\x{1d174}\x{1d175}\x{1d176}\x{1d177}\x{1d178}\x{1d179}\x{1d17a}
    \x{e0001}
    \x{e0020}\x{e0030}\x{e0040}\x{e0050}\x{e0060}\x{e0070}\x{e007f}
    ** Failers
    \x{09}
    \x{1D}
    \x{85}
    \x{2028}
    \x{2029}
    \x{2065}
    \x{e0002}
    \x{e001f}
    \x{e0080} 

/^[[:punct:]]+$/utf,ucp
    \$+<=>^`|~
    !\"#%&'()*,-./:;?@[\\]_{}
    \x{a1}\x{a7}  
    \x{37e} 
    ** Failers
    abcde  

/^[[:^graph:]]+$/utf,ucp
    \x{09}\x{0a}\x{1D}\x{20}\x{85}\x{a0}\x{1680}
    \x{2028}\x{2029}\x{202f}\x{2065}
    \x{3000}\x{e0002}\x{e001f}\x{e0080}
    ** Failers
    Letter:ABC
    Mark:\x{300}\x{1d172}\x{1d17b}
    Number:9\x{660}
    Punctuation:\x{66a},;
    Symbol:\x{6de}<>\x{fffc}
    Cf-property:\x{ad}\x{600}\x{601}\x{602}\x{603}\x{604}\x{6dd}\x{70f}
    \x{200b}\x{200c}\x{200d}\x{200e}\x{200f}
    \x{202a}\x{202b}\x{202c}\x{202d}\x{202e}
    \x{2060}\x{2061}\x{2062}\x{2063}\x{2064}
    \x{206a}\x{206b}\x{206c}\x{206d}\x{206e}\x{206f}
    \x{feff}
    \x{fff9}\x{fffa}\x{fffb}
    \x{110bd}
    \x{1d173}\x{1d174}\x{1d175}\x{1d176}\x{1d177}\x{1d178}\x{1d179}\x{1d17a}
    \x{e0001}
    \x{e0020}\x{e0030}\x{e0040}\x{e0050}\x{e0060}\x{e0070}\x{e007f}

/^[[:^print:]]+$/utf,ucp
    \x{09}\x{1D}\x{85}\x{2028}\x{2029}\x{2065}
    \x{e0002}\x{e001f}\x{e0080}
    ** Failers
    Space: \x{a0}
    \x{1680}\x{2000}\x{2001}\x{2002}\x{2003}\x{2004}\x{2005}
    \x{2006}\x{2007}\x{2008}\x{2009}\x{200a} 
    \x{202f}\x{205f} 
    \x{3000}
    Letter:ABC
    Mark:\x{300}\x{1d172}\x{1d17b}
    Number:9\x{660}
    Punctuation:\x{66a},;
    Symbol:\x{6de}<>\x{fffc}
    Cf-property:\x{ad}\x{600}\x{601}\x{602}\x{603}\x{604}\x{6dd}\x{70f}
    \x{200b}\x{200c}\x{200d}\x{200e}\x{200f}
    \x{202a}\x{202b}\x{202c}\x{202d}\x{202e}
    \x{202f}
    \x{2060}\x{2061}\x{2062}\x{2063}\x{2064}
    \x{206a}\x{206b}\x{206c}\x{206d}\x{206e}\x{206f}
    \x{feff}
    \x{fff9}\x{fffa}\x{fffb}
    \x{110bd}
    \x{1d173}\x{1d174}\x{1d175}\x{1d176}\x{1d177}\x{1d178}\x{1d179}\x{1d17a}
    \x{e0001}
    \x{e0020}\x{e0030}\x{e0040}\x{e0050}\x{e0060}\x{e0070}\x{e007f}

/^[[:^punct:]]+$/utf,ucp
    abcde  
    ** Failers
    \$+<=>^`|~
    !\"#%&'()*,-./:;?@[\\]_{}
    \x{a1}\x{a7}  
    \x{37e} 

/[RST]+/i,utf,ucp
    Ss\x{17f}
    
/[R-T]+/i,utf,ucp
    Ss\x{17f}

/[q-u]+/i,utf,ucp
    Ss\x{17f}

/^s?c/im,utf
    scat
    
# The next four tests are for repeated caseless back references when the 
# code unit length of the matched text is different to that of the original
# group in the UTF-8 case.

/^(\x{23a})\1*(.)/i,utf
    \x{23a}\x{23a}\x{23a}\x{23a}
    \x{23a}\x{2c65}\x{2c65}\x{2c65}
    \x{23a}\x{23a}\x{2c65}\x{23a}

/^(\x{23a})\1*(..)/i,utf
    \x{23a}\x{2c65}\x{2c65}\x{2c65}
    \x{23a}\x{23a}\x{2c65}\x{23a}

/^(\x{23a})\1*(...)/i,utf
    \x{23a}\x{2c65}\x{2c65}\x{2c65}
    \x{23a}\x{23a}\x{2c65}\x{23a}

/^(\x{23a})\1*(....)/i,utf
    \x{23a}\x{2c65}\x{2c65}\x{2c65}
    \x{23a}\x{23a}\x{2c65}\x{23a}

# End of testinput4
